<!DOCTYPE html>
<html>
	<head>
		
		<script type="text/javascript" src="js/Effects.js"></script>
		<script type="text/javascript" src="js/FrameTimer.js"></script>

<script>
var effects; 
var effectsNovo;
var effectsPart;
var context;
var mouseXpos = 0;
var mouseYpos = 0;
var timer 		= new FrameTimer(); timer.tick()

function init() {
	var canvas = document.getElementById( "myCanvas" );
	context = canvas.getContext( "2d" );	
	context.globalCompositeOperation = 


	effects = new Effects();
	effectsNovo = new Effects();
	effectsPart = new Effects();

	effects.setDefault(0);
	effectsNovo.setDefault(1);
	effectsPart.setDefault(2);
	

	setInterval("loop()", 1000 / 30 );
}

function loop() {
	timer.tick();
	this.context.globalCompositeOperation = "lighter";

	effects.position = Vector.create( 500, 500 );
	effectsNovo.position = Vector.create( 490, 430 );
	effectsPart.position = Vector.create( 730, 530 );

	effects.update( timer.getSeconds() );
	effectsNovo.update( timer.getSeconds() );
	effectsPart.update( timer.getSeconds() );

	context.clearRect( 0, 0, 1020, 800 );
	effectsPart.renderParticles( this.context );
	effectsNovo.renderParticles( this.context );
	effects.renderParticles( this.context );
	
}


function getMousePos(canvas, evt) {
	var obj = canvas;
	var top = 0;
	var left = 0;
	while (obj && obj.tagName != 'BODY') {
		top += obj.offsetTop;
		left += obj.offsetLeft;
		obj = obj.offsetParent;
	}

	var mouseX = evt.clientX - left + window.pageXOffset;
	var mouseY = evt.clientY - top + window.pageYOffset;

	return {
		x : mouseX,
		y : mouseY
	};
}


window.onload = function(){
	init();

	document.getElementById("myCanvas").addEventListener('mousemove', function(evt) {
		var mousePos = getMousePos(document.getElementById("myCanvas"), evt);
		mouseXpos = mousePos.x;
		mouseYpos = mousePos.y;
		//effects.position = Vector.create( mouseXpos, mouseYpos );
		
	
	}, false);

}

</script>
		
	</head>
	
	<body oncontextmenu="return false;" style="background-color: #000;">
		<canvas id="myCanvas" width="1020" height="800" style="border:0px"> your browser does not support the canvas tag </canvas>

	</body>

</html>
